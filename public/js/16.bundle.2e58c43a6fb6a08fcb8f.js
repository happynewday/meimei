(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{519:function(t,e,a){"use strict";a.r(e);var n=a(20),r=a.n(n),s=a(14),u=a.n(s),c=a(83),i=function(){return Object(c.a)({url:"/backend/tag/list",method:"POST"})},p=function(t){return Object(c.a)({url:"/backend/picture/list",method:"POST",data:t})};e.default={namespace:"list",state:{tags:[],tag:null,pageNum:1,pageSize:20,items:[],total:0},subscriptions:{setup:function(t){var e=t.dispatch;return t.history.listen(function(t){-1!==t.pathname.indexOf("/list")&&e({type:"init"})})}},effects:{init:u.a.mark(function t(e,a){var n,r,s,c,p;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.call,r=a.put,t.next=3,n(i);case 3:if(s=t.sent,c=s.status,p=s.data,0===c){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,r({type:"save",playload:{tags:p.tags}});case 10:case"end":return t.stop()}},t,this)}),load:u.a.mark(function t(e,a){var n,r,s,c,i,o,l,f,g,d;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.playload,r=a.call,s=a.put,c=a.select,t.next=4,c(function(t){return t.list});case 4:return i=t.sent,o=i.pageSize,l=n.tag,t.next=9,r(p,{tag:l,pageNum:1,pageSize:o});case 9:if(f=t.sent,g=f.status,d=f.data,0===g){t.next=14;break}return t.abrupt("return");case 14:return t.next=16,s({type:"save",playload:{items:d.list,total:d.pages,pageNum:d.pageNum,tag:l}});case 16:case"end":return t.stop()}},t,this)}),nextPage:u.a.mark(function t(e,a){var n,r,s,c,i,o,l,f,g,d,m,x;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.call,r=a.put,s=a.select,t.next=3,s(function(t){return t.list});case 3:if(c=t.sent,i=c.pageSize,o=c.pageNum,l=c.tag,f=c.items,g=c.total,o!==g){t.next=11;break}return t.abrupt("return");case 11:return t.next=13,n(p,{tag:l,pageNum:o+1,pageSize:i});case 13:if(d=t.sent,m=d.status,x=d.data,0===m){t.next=18;break}return t.abrupt("return");case 18:return t.next=20,r({type:"save",playload:{items:f.concat(x.list),total:x.total,pageNum:x.pageNum}});case 20:case"end":return t.stop()}},t,this)})},reducers:{save:function(t,e){var a=e.playload;return r()({},t,a)}}}}}]);